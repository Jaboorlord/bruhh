-- Services
local Players = game:GetService("Players")
local Camera = game.Workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local Workspace = game:GetService("Workspace")

-- Create GUI
local tekkit = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local smoothText = Instance.new("TextBox")
local aimbotT = Instance.new("TextButton")
local smooth = Instance.new("TextLabel")
local missionToggle = Instance.new("TextButton")
local performanceToggle = Instance.new("TextButton")
local statsText = Instance.new("TextLabel")

-- Settings
local aimbotEnabled = false  -- Initially disabled, toggled by GUI
local aimbotRange = 1000  -- Max distance to aim at targets
local smoothness = 0.1  -- Smoothing factor for the aiming
local autoMissionEnabled = false  -- Toggle for Auto Mission Farm
local performanceModeEnabled = false  -- Toggle for Performance Mode
local webhookUrl = "YOUR_DISCORD_WEBHOOK_URL"  -- Replace with your actual webhook URL

-- Tracking variables
local playerStats = {
    Gold = 0,
    XP = 0,
    Gems = 0
}

-- Function to get the closest target
local function getClosestTarget()
    local closestTarget = nil
    local closestDistance = aimbotRange

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local targetPosition = player.Character.HumanoidRootPart.Position
            local distance = (targetPosition - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude

            if distance < closestDistance then
                closestDistance = distance
                closestTarget = player
            end
        end
    end
    return closestTarget
end

-- Aimbot Function
local function aimAtTarget(target)
    local humanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") and humanoidRootPart then
        local targetPosition = target.Character.HumanoidRootPart.Position
        local direction = (targetPosition - Camera.CFrame.Position).unit
        local newCFrame = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + direction)
        Camera.CFrame = Camera.CFrame:Lerp(newCFrame, smoothness)
    end
end

-- Create GUI
local function createAimbotGUI()
    tekkit.Name = "tekkit"
    tekkit.Parent = game.CoreGui
    tekkit.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    tekkit.ResetOnSpawn = false

    Frame.Parent = tekkit
    Frame.BackgroundColor3 = Color3.fromRGB(68, 68, 68)
    Frame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Frame.BorderSizePixel = 0
    Frame.Position = UDim2.new(0.701550364, 0, 0.151329249, 0)
    Frame.Size = UDim2.new(0, 293, 0, 398)

    Title.Name = "Title"
    Title.Parent = Frame
    Title.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
    Title.BackgroundTransparency = 0.400
    Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
    Title.BorderSizePixel = 0
    Title.Position = UDim2.new(-0.000875323312, 0, 0, 0)
    Title.Size = UDim2.new(0, 293, 0, 50)
    Title.Font = Enum.Font.SourceSans
    Title.Text = "Tekkit Hub"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextScaled = true
    Title.TextSize = 14.000
    Title.TextWrapped = true

    smoothText.Name = "smoothText"
    smoothText.Parent = Frame
    smoothText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    smoothText.BackgroundTransparency = 0.800
    smoothText.BorderColor3 = Color3.fromRGB(0, 0, 0)
    smoothText.BorderSizePixel = 0
    smoothText.Position = UDim2.new(0.632818341, 0, 0.442483276, 0)
    smoothText.Size = UDim2.new(0.113109201, 0, 0.110402919, 0)
    smoothText.Font = Enum.Font.SourceSans
    smoothText.Text = "0.1"
    smoothText.TextColor3 = Color3.fromRGB(255, 255, 255)
    smoothText.TextSize = 14.000

    aimbotT.Name = "aimbotT"
    aimbotT.Parent = Frame
    aimbotT.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    aimbotT.BackgroundTransparency = 0.350
    aimbotT.BorderColor3 = Color3.fromRGB(0, 0, 0)
    aimbotT.BorderSizePixel = 0
    aimbotT.Position = UDim2.new(0.199732855, 0, 0.301835656, 0)
    aimbotT.Size = UDim2.new(0, 105, 0, 35)
    aimbotT.Font = Enum.Font.SourceSans
    aimbotT.Text = "Toggle Aimbot"
    aimbotT.TextColor3 = Color3.fromRGB(255, 255, 255)
    aimbotT.TextScaled = true
    aimbotT.TextSize = 14.000
    aimbotT.TextWrapped = true

    smooth.Name = "smooth"
    smooth.Parent = Frame
    smooth.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    smooth.BackgroundTransparency = 0.900
    smooth.BorderColor3 = Color3.fromRGB(0, 0, 0)
    smooth.BorderSizePixel = 0
    smooth.Position = UDim2.new(0.196586117, 0, 0.442483276, 0)
    smooth.Size = UDim2.new(0.361507893, 0, 0.110402741, 0)
    smooth.Font = Enum.Font.SourceSans
    smooth.Text = "Smoothness:"
    smooth.TextColor3 = Color3.fromRGB(255, 255, 255)
    smooth.TextScaled = true
    smooth.TextSize = 14.000
    smooth.TextWrapped = true

    -- Add mission farm toggle
    missionToggle.Name = "missionToggle"
    missionToggle.Parent = Frame
    missionToggle.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    missionToggle.Position = UDim2.new(0.199, 0, 0.451, 0)
    missionToggle.Size = UDim2.new(0, 105, 0, 35)
    missionToggle.Text = "Auto Mission"
    missionToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    missionToggle.TextScaled = true
    missionToggle.MouseButton1Click:Connect(function()
        autoMissionEnabled = not autoMissionEnabled
        if autoMissionEnabled then
            missionToggle.BackgroundColor3 = Color3.fromRGB(80, 255, 80)
            missionToggle.Text = "Auto Mission ON"
        else
            missionToggle.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
            missionToggle.Text = "Auto Mission OFF"
        end
    end)

    -- Add performance mode toggle
    performanceToggle.Name = "performanceToggle"
    performanceToggle.Parent = Frame
    performanceToggle.BackgroundColor3 = Color3.fromRGB(0, 170, 170)
    performanceToggle.Position = UDim2.new(0.199, 0, 0.5, 0)
    performanceToggle.Size = UDim2.new(0, 105, 0, 35)
    performanceToggle.Text = "Performance Mode"
    performanceToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    performanceToggle.TextScaled = true
    performanceToggle.MouseButton1Click:Connect(function()
        performanceModeEnabled = not performanceModeEnabled
        if performanceModeEnabled then
            performanceToggle.BackgroundColor3 = Color3.fromRGB(80, 255, 80)
            performanceToggle.Text = "Performance Mode ON"
        else
            performanceToggle.BackgroundColor3 = Color3.fromRGB(0, 170, 170)
            performanceToggle.Text = "Performance Mode OFF"
        end
    end)

    -- Add stats display
    statsText.Name = "statsText"
    statsText.Parent = Frame
    statsText.BackgroundTransparency = 1
    statsText.Position = UDim2.new(0, 10, 0.75, 0)
    statsText.Size = UDim2.new(0, 275, 0, 50)
    statsText.Font = Enum.Font.SourceSans
    statsText.TextColor3 = Color3.fromRGB(255, 255, 255)
    statsText.Text = "Gold: " .. playerStats.Gold .. "\nXP: " .. playerStats.XP .. "\nGems: " .. playerStats.Gems
    statsText.TextScaled = true

    return Frame
end

-- Create GUI
createAimbotGUI()

-- Function to send rewards via Discord Webhook
local function sendWebhookNotification(message)
    local data = {
        content = message
    }
    HttpService:PostAsync(webhookUrl, HttpService:JSONEncode(data), Enum.HttpContentType.ApplicationJson)
end

-- Function to track and display stats
local function updateStats()
    -- Replace this with actual stat tracking
    playerStats.Gold = math.random(0, 10000)  -- Example random value
    playerStats.XP = math.random(0, 1000)    -- Example random value
    playerStats.Gems = math.random(0, 100)   -- Example random value

    statsText.Text = "Gold: " .. playerStats.Gold .. "\nXP: " .. playerStats.XP .. "\nGems: " .. playerStats.Gems
end

-- Auto Mission Farm (Placeholder function)
local function autoMissionFarm()
    if autoMissionEnabled then
        -- Add mission completion logic here
        print("Automatically completing mission...")
    end
end

-- Performance Mode Optimizations (e.g., disable certain functions in performance mode)
local function optimizePerformance()
    if performanceModeEnabled then
        -- Disable certain functions to reduce resource usage
        print("Performance Mode Enabled: Optimizing functions...")
    else
        -- Re-enable normal functions
        print("Performance Mode Disabled: Restoring functions...")
    end
end

-- Aimbot Loop
RunService.RenderStepped:Connect(function()
    if aimbotEnabled then
        local target = getClosestTarget()
        if target then
            aimAtTarget(target)
        end
    end
    updateStats()
    autoMissionFarm()
    optimizePerformance()
end)

-- Toggle aimbot with left mouse button when GUI
